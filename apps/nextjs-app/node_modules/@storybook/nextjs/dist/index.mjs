import { preview_exports } from './chunk-TNOZHPK5.mjs';
import './chunk-NQ32RFK2.mjs';
import { __commonJS, __require, __export, __toESM } from './chunk-QUZPS4B6.mjs';
import { composeConfigs, setProjectAnnotations as setProjectAnnotations$1, composeStory as composeStory$1, composeStories as composeStories$1 } from 'storybook/internal/preview-api';
import React2, { StrictMode, Fragment, Component } from 'react';
import { TestingLibraryMustBeConfiguredError } from 'storybook/internal/preview-errors';

var require_react_18=__commonJS({"../../lib/react-dom-shim/dist/react-18.js"(exports,module){var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__export2=(target,all)=>{for(var name in all)__defProp(target,name,{get:all[name],enumerable:!0});},__copyProps=(to,from,except,desc)=>{if(from&&typeof from=="object"||typeof from=="function")for(let key of __getOwnPropNames(from))!__hasOwnProp.call(to,key)&&key!==except&&__defProp(to,key,{get:()=>from[key],enumerable:!(desc=__getOwnPropDesc(from,key))||desc.enumerable});return to},__toESM2=(mod,isNodeMode,target)=>(target=mod!=null?__create(__getProtoOf(mod)):{},__copyProps(isNodeMode||!mod||!mod.__esModule?__defProp(target,"default",{value:mod,enumerable:!0}):target,mod)),__toCommonJS=mod=>__copyProps(__defProp({},"__esModule",{value:!0}),mod),react_18_exports={};__export2(react_18_exports,{renderElement:()=>renderElement2,unmountElement:()=>unmountElement2});module.exports=__toCommonJS(react_18_exports);var import_react4=__toESM2(__require("react")),import_client=__toESM2(__require("react-dom/client")),nodes=new Map,WithCallback=({callback,children})=>{let once=(0, import_react4.useRef)();return (0, import_react4.useLayoutEffect)(()=>{once.current!==callback&&(once.current=callback,callback());},[callback]),children},renderElement2=async(node,el,rootOptions)=>{let root=await getReactRoot(el,rootOptions);return new Promise(resolve=>{root.render(import_react4.default.createElement(WithCallback,{callback:()=>resolve(null)},node));})},unmountElement2=(el,shouldUseNewRootApi)=>{let root=nodes.get(el);root&&(root.unmount(),nodes.delete(el));},getReactRoot=async(el,rootOptions)=>{let root=nodes.get(el);return root||(root=import_client.default.createRoot(el,rootOptions),nodes.set(el,root)),root};}});var entry_preview_exports={};__export(entry_preview_exports,{mount:()=>mount,parameters:()=>parameters,render:()=>render,renderToCanvas:()=>renderToCanvas});var render=(args,context)=>{let{id,component:Component}=context;if(!Component)throw new Error(`Unable to render story ${id} as the component annotation is missing from the default export`);return React2.createElement(Component,{...args})};var scope=(()=>{let win;return typeof window<"u"?win=window:typeof globalThis<"u"?win=globalThis:typeof global<"u"?win=global:typeof self<"u"?win=self:win={},win})();var import_react_dom_shim=__toESM(require_react_18());var{FRAMEWORK_OPTIONS}=scope,ErrorBoundary=class extends Component{constructor(){super(...arguments);this.state={hasError:!1};}static getDerivedStateFromError(){return {hasError:!0}}componentDidMount(){let{hasError}=this.state,{showMain}=this.props;hasError||showMain();}componentDidCatch(err){let{showException}=this.props;showException(err);}render(){let{hasError}=this.state,{children}=this.props;return hasError?null:children}},Wrapper=FRAMEWORK_OPTIONS?.strictMode?StrictMode:Fragment;async function renderToCanvas({storyContext,unboundStoryFn,showMain,showException,forceRemount},canvasElement){let content=React2.createElement(ErrorBoundary,{showMain,showException},React2.createElement(unboundStoryFn,{...storyContext})),element=Wrapper?React2.createElement(Wrapper,null,content):content;return forceRemount&&(0, import_react_dom_shim.unmountElement)(canvasElement),await(0, import_react_dom_shim.renderElement)(element,canvasElement,storyContext?.parameters?.react?.rootOptions),()=>(0, import_react_dom_shim.unmountElement)(canvasElement)}var mount=context=>async ui=>(ui!=null&&(context.originalStoryFn=()=>ui),await context.renderToCanvas(),context.canvas);var parameters={renderer:"react"};var INTERNAL_DEFAULT_PROJECT_ANNOTATIONS={...entry_preview_exports,renderToCanvas:(renderContext,canvasElement)=>{if(renderContext.storyContext.testingLibraryRender==null)throw new TestingLibraryMustBeConfiguredError;let{storyContext:{context,unboundStoryFn:Story,testingLibraryRender:render2}}=renderContext,{unmount}=render2(React2.createElement(Story,{...context}),{container:context.canvasElement});return unmount}};function setProjectAnnotations(projectAnnotations){return setProjectAnnotations$1(projectAnnotations)}var defaultProjectAnnotations=composeConfigs([INTERNAL_DEFAULT_PROJECT_ANNOTATIONS,preview_exports]);function composeStory(story,componentAnnotations,projectAnnotations,exportsName){return composeStory$1(story,componentAnnotations,projectAnnotations,defaultProjectAnnotations,exportsName)}function composeStories(csfExports,projectAnnotations){return composeStories$1(csfExports,projectAnnotations,composeStory)}

export { composeStories, composeStory, setProjectAnnotations };
